<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="./lib/jquery-1.11.3.min.js"></script>
  <title>构造函数上的方法</title>
  <style>
    body {
      font-family: "microsoft yahei";
    }

    li {
      margin: 2px;
    }
  </style>
</head>

<body>
  <div id="box"></div>
  <ol>
    <li>数组相关 (6) [$.inArray, $.makeArray, $.merge, $.grep, $.map, $.each]</li>
    <li>判断型 (5) [$.isArray(), $.isFunction(), $.isNumeric(), $.isEmptyObject(), $.isPlainObject()]</li>
    <li>解析类 (2) [$.parseHTML, $.parseJSON()]</li>
    <li>其他 (2) [$.now(), $.type()]</li>
  </ol>
  <script>

    $(function () {

      // 1. 数组相关
      // 1.1 $.inArray(val, arr, [fromIndex]) 找到返回索引值 否则返回-1 相当于数组的indexOf方法
      var arr = ['apple', 'banana', 'mango'];
      console.log($.inArray('mango', arr));; // 2
      console.log(arr.indexOf('banana')); // 1


      // 1.2 $.makeArray(obj)

      // 1.3 $.merge(arr1,arr2) 相当于数组的concat方法
      console.log($.merge([1, 2, 3], [4, 5, 6])); // (6) [1, 2, 3, 4, 5, 6]
      console.log([1, 2, 3].concat([4, 5, 6])); // (6) [1, 2, 3, 4, 5, 6]


      // 1.4 $.grep(arr, callback) 相当于数组的filter方法
      console.log($.grep([50, 20, 60], (element, index) => { return element >= 50 })); // (2) [50, 60]
      console.log([50, 20, 60].filter(element => element >= 50)); // (2) [50, 60]


      // 1.5 $.map(arr, callback) 相当于数组的map方法
      console.log($.map([1, 2, 3], function (element, index) { return element *= 2 })); // (3) [2, 4, 6]
      console.log([1, 2, 3].map(element => element *= 2)); // (3) [2, 4, 6]


      // 1.6 $.each(arr, callback) 相当于数组的forEach方法 
      $.map(['apple', 'banana', 'mango'], function (element, index) { console.log(index + " | " + element); }); // 输出结果一样
      ['apple', 'banana', 'mango'].forEach((element, index) => { console.log(index + " | " + element); }); // 输出结果一样


      // 2. 判断型
      // 2.1 $.isArray() 相当于ES5的Array.isArray()

      // 2.2 $.isFunction()

      // 2.3 $.isNumeric(value) 只要+x不为NaN即可

      // 2.4 $.isEmptyObject(obj) 原生可以用Object.keys(ojb).length==0
      console.log(Object.keys({}).length); // 0

      // 2.5 $.isPlainObject() 纯粹的对象 不是函数数组等


      // 3. 解析类
      // 3.1 $.parseHTML(htmlString) // 用处不大 直接用innerHTML就可以了
      $('#box').html($.parseHTML(`Hello, <b>my name is</b> jQuery.`));

      // 3.2 $.parseJSON()  相当于JSON.parse()
      console.log($.parseJSON(`[{ "name": "kimi", "age": 12 }, { "name": "jack", "age": 13 }]`)); // 返回一个数组 [{ "name": "kimi", "age": 12 }, { "name": "jack", "age": 13 }]
      console.log(JSON.parse(`[{ "name": "kimi", "age": 12 }, { "name": "jack", "age": 13 }]`)); // 返回结果一样


      // 4. 其他
      // 4.1 $.now() 相当于 new Date().getTime()
      console.log($.now());
      console.log(new Date().getTime());

      // 4.2 $.type() 相当于typeof 当时判断得比typeof准确 
      console.log(typeof []); // object
      console.log($.type([])); // array
    });

  </script>
</body>

</html>